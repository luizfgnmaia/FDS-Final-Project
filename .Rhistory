shiny::runApp()
shiny::runApp()
runApp()
runApp()
library(stringr)
library(dplyr)
files = list.files("data")
partidas = files %>%
lapply(function(x) read.csv(paste0("data/", x), stringsAsFactors = FALSE, encoding = "UTF-8") %>%
mutate(file = str_sub(x, start = 1, end = -5))) %>%
do.call(rbind, .) %>%
rowwise() %>%
mutate(date = arruma_data(date)) %>%
filter(date >= "2002-01-01") %>%
arrange(date) %>%
mutate(result = if_else(goals_1 > goals_2, 1,
if_else(goals_1 == goals_2, 0.5, 0)))
library(stringr)
library(dplyr)
arruma_data <- function(x) {
if(nchar(x) == 15) {
ano1 = str_sub(x, start = 7, end = 10)
ano2 = str_sub(x, start = 12, end = 15)
if(as.integer(str_sub(x, start = 4, end = 5)) >= 7) {
x = (paste0(str_sub(x, start = 1, end = 6), ano1))
} else {
x = (paste0(str_sub(x, start = 1, end = 6), ano2))
}
}
as.Date(x, "%d.%m.%Y")
}
files = list.files("data")
partidas = files %>%
lapply(function(x) read.csv(paste0("data/", x), stringsAsFactors = FALSE, encoding = "UTF-8") %>%
mutate(file = str_sub(x, start = 1, end = -5))) %>%
do.call(rbind, .) %>%
rowwise() %>%
mutate(date = arruma_data(date)) %>%
filter(date >= "2002-01-01") %>%
arrange(date) %>%
mutate(result = if_else(goals_1 > goals_2, 1,
if_else(goals_1 == goals_2, 0.5, 0)))
clubes_paises = tibble(Clube = c(partidas$club_1, partidas$club_2),
Pais = c(partidas$file, partidas$file)) %>%
distinct(Clube, Pais) %>%
filter(Pais != "Continentais")
clubes_paises
clubes_paises = tibble(Clube = c(partidas$club_1, partidas$club_2),
Pais = c(partidas$file, partidas$file)) %>%
distinct(Clube, Pais) %>%
filter(Pais != "Continentais") %>%
arrange(Clube, Pais)
View(clubes_paises)
clubes_continentais = tibble(Clube = c(partidas$club_1, partidas$club_2),
Pais = c(partidas$file, partidas$file)) %>%
distinct(Clube, Pais) %>%
filter(Pais == "Continentais") %>%
arrange(Clube)
clubes_continentais
setdiff(clubes_continentais$Clube, clubes_paises$Clube)
library(stringr)
library(dplyr)
arruma_data <- function(x) {
if(nchar(x) == 15) {
ano1 = str_sub(x, start = 7, end = 10)
ano2 = str_sub(x, start = 12, end = 15)
if(as.integer(str_sub(x, start = 4, end = 5)) >= 7) {
x = (paste0(str_sub(x, start = 1, end = 6), ano1))
} else {
x = (paste0(str_sub(x, start = 1, end = 6), ano2))
}
}
as.Date(x, "%d.%m.%Y")
}
files = list.files("data")
partidas = files %>%
lapply(function(x) read.csv(paste0("data/", x), stringsAsFactors = FALSE, encoding = "UTF-8") %>%
mutate(file = str_sub(x, start = 1, end = -5))) %>%
do.call(rbind, .) %>%
rowwise() %>%
mutate(date = arruma_data(date)) %>%
filter(date >= "2002-01-01") %>%
arrange(date) %>%
mutate(result = if_else(goals_1 > goals_2, 1,
if_else(goals_1 == goals_2, 0.5, 0)))
clubes_paises = tibble(Clube = c(partidas$club_1, partidas$club_2),
Pais = c(partidas$file, partidas$file)) %>%
distinct(Clube, Pais) %>%
filter(Pais != "Continentais") %>%
arrange(Clube, Pais)
clubes_continentais = tibble(Clube = c(partidas$club_1, partidas$club_2),
Pais = c(partidas$file, partidas$file)) %>%
distinct(Clube, Pais) %>%
filter(Pais == "Continentais") %>%
arrange(Clube)
setdiff(clubes_continentais$Clube, clubes_paises$Clube)
clubes_paises %>%
count(Clube) %>%
arrange(desc(n))
View(clubes_paises)
write.table(clubes_paises, file = "clubes_paises.csv", sep = ";", na = "", row.names = FALSE)
library(stringr)
library(dplyr)
arruma_data <- function(x) {
if(nchar(x) == 15) {
ano1 = str_sub(x, start = 7, end = 10)
ano2 = str_sub(x, start = 12, end = 15)
if(as.integer(str_sub(x, start = 4, end = 5)) >= 7) {
x = (paste0(str_sub(x, start = 1, end = 6), ano1))
} else {
x = (paste0(str_sub(x, start = 1, end = 6), ano2))
}
}
as.Date(x, "%d.%m.%Y")
}
files = list.files("data")
partidas = files %>%
lapply(function(x) read.csv(paste0("data/", x), stringsAsFactors = FALSE, encoding = "UTF-8") %>%
mutate(file = str_sub(x, start = 1, end = -5))) %>%
do.call(rbind, .) %>%
rowwise() %>%
mutate(date = arruma_data(date)) %>%
filter(date >= "2002-01-01") %>%
arrange(date) %>%
mutate(result = if_else(goals_1 > goals_2, 1,
if_else(goals_1 == goals_2, 0.5, 0)))
clubes_paises = tibble(Clube = c(partidas$club_1, partidas$club_2),
Pais = c(partidas$file, partidas$file)) %>%
distinct(Clube, Pais) %>%
filter(Pais != "Continentais") %>%
arrange(Clube, Pais)
clubes_continentais = tibble(Clube = c(partidas$club_1, partidas$club_2),
Pais = c(partidas$file, partidas$file)) %>%
distinct(Clube, Pais) %>%
filter(Pais == "Continentais") %>%
arrange(Clube)
setdiff(clubes_continentais$Clube, clubes_paises$Clube)
clubes_paises %>%
count(Clube) %>%
arrange(desc(n))
write.table(clubes_paises, file = "clubes_paises.csv", sep = ";", na = "", row.names = FALSE)
clubes_paises %>% filter(Clube == "Fortaleza") %>% View()
files = list.files("data")
partidas = files %>%
lapply(function(x) read.csv(paste0("data/", x), stringsAsFactors = FALSE, encoding = "UTF-8") %>%
mutate(file = str_sub(x, start = 1, end = -5))) %>%
do.call(rbind, .) %>%
rowwise() %>%
mutate(date = arruma_data(date)) %>%
filter(date >= "2002-01-01") %>%
arrange(date) %>%
mutate(result = if_else(goals_1 > goals_2, 1,
if_else(goals_1 == goals_2, 0.5, 0)))
library(stringr)
library(dplyr)
arruma_data <- function(x) {
if(nchar(x) == 15) {
ano1 = str_sub(x, start = 7, end = 10)
ano2 = str_sub(x, start = 12, end = 15)
if(as.integer(str_sub(x, start = 4, end = 5)) >= 7) {
x = (paste0(str_sub(x, start = 1, end = 6), ano1))
} else {
x = (paste0(str_sub(x, start = 1, end = 6), ano2))
}
}
as.Date(x, "%d.%m.%Y")
}
files = list.files("data")
partidas = files %>%
lapply(function(x) read.csv(paste0("data/", x), stringsAsFactors = FALSE, encoding = "UTF-8") %>%
mutate(file = str_sub(x, start = 1, end = -5))) %>%
do.call(rbind, .) %>%
rowwise() %>%
mutate(date = arruma_data(date)) %>%
filter(date >= "2002-01-01") %>%
arrange(date) %>%
mutate(result = if_else(goals_1 > goals_2, 1,
if_else(goals_1 == goals_2, 0.5, 0)))
View(partidas)
